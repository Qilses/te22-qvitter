{%extends "layout.njk"%}
{%block content%}

<main>

  <h1>{{ message }}</h1>
  
  <style>
    
    .HamburgerMenu {
      display: grid;
      grid-template-columns: auto;
      border: none;
      width: 100px;
      height: 100px;
      background-color: rgba(249, 236, 217, 255);
    }
    .overlay {
      height: 0%;
      width: 100%;
      position: fixed;
      z-index: 1;
      top: 0;
      left: 0;
      background-color: rgb(0,0,0);
      background-color: rgba(0,0,0, 0.9);
      overflow-y: hidden;
      transition: 0.5s;
    }
    
    .overlay-content {
      position: relative;
      top: 25%;
      width: 100%;
      text-align: center;
      margin-top: 30px;
    }
    
    .overlay a {
      padding: 8px;
      text-decoration: none;
      font-size: 36px;
      color: #818181;
      display: block;
      transition: 0.3s;
    }
    
    .overlay a:hover, .overlay a:focus {
      color: #f1f1f1;
    }
    
    .overlay .closebtn {
      position: absolute;
      top: 20px;
      right: 45px;
      font-size: 60px;
    }
    
    @media screen and (max-height: 450px) {
      .overlay {overflow-y: auto;}
      .overlay a {font-size: 20px}
      .overlay .closebtn {
      font-size: 40px;
      top: 15px;
      right: 35px;
      }
    }

    

  
  </style>

  <div id="myNav" class="overlay">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
      <div id="overlay-content">
        <a href="/">Home</a>
        <a href="/tweets">Tweets</a>
        <a href="/tweets/new">Skapa egen Qvitt</a>
      </div>
    </div>
  </div>


  <button class="HamburgerMenu">
      <img onclick="openNav()" src="/img/NavMenu.webp" alt="ham">
  </button>


  {% for tweet in tweets %}
  <li class="tweet">

    <article>
      <h1>{{ tweet.message }}</h1>
      <header>
        <h2>{{ tweet.name }}</h2>
        <time datetime="{{ tweet.date }}">{{ tweet.date }}</time>
      </header>
      <footer>
        <ul>
          <li><button>Shared</button></li>
          <li><button>Reply</button></li>
          <li><button>Favourite</button></li>
          <li><button><a href="/">Edit</a></button></li>
          <li><button><a href="/tweets/{{ tweet.id }}/delete">Skr√§pa</a></button></li>
        </ul>
      </footer>
    </article>
  </li>
  {% endfor %}

  </ul>
</main>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const timeElements = document.querySelectorAll("time[datetime]");
    timeElements.forEach(timeElement => {
      const date = new Date(timeElement.getAttribute("datetime"));
      const now = new Date();
      const diffInSeconds = Math.floor((now - date) / 1000);
      const diffInMinutes = Math.floor(diffInSeconds / 60);
      const diffInHours = Math.floor(diffInMinutes / 60);
      const diffInDays = Math.floor(diffInHours / 24);

      let displayText;
      if (diffInDays > 0) {
        displayText = `${diffInDays} day${diffInDays > 1 ? 's' : ''} ago`;
      } else if (diffInHours > 0) {
        displayText = `${diffInHours} hour${diffInHours > 1 ? 's' : ''} ago`;
      } else if (diffInMinutes > 0) {
        displayText = `${diffInMinutes} minute${diffInMinutes > 1 ? 's' : ''} ago`;
      } else {
        displayText = `${diffInSeconds} second${diffInSeconds > 1 ? 's' : ''} ago`;
      }

      timeElement.textContent = displayText;
    });
  });
  function openNav() {
    document.getElementById("myNav").style.height = "30%";
  }
  
  function closeNav() {
    document.getElementById("myNav").style.height = "0%";
  }
</script>
{%endblock%}